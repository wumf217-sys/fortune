<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>8 - Inner Orbit</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Hiragino Sans", Arial, sans-serif; line-height: 1.9; margin: 0; background:#0b0b0d; color:#f4f4f4; }
header { padding:18px 16px; font-size:18px; font-weight:600; text-align:center; border-bottom:1px solid #222; }
.container { padding:16px; max-width:960px; margin:0 auto; }
input, select { width:100%; padding:10px; border-radius:10px; border:1px solid #333; background:#111; color:#fff; margin-bottom:12px; }
button { width:100%; padding:12px; border-radius:999px; font-size:15px; border:0; background:#6f6cff; color:white; margin-top:6px; }
button:active { opacity:.75; }
.tabs { display:flex; overflow-x:auto; border-bottom:1px solid #222; }
.tab { padding:10px 14px; white-space:nowrap; cursor:pointer; border-bottom:2px solid transparent; font-size:13px; }
.tab.active { border-bottom:2px solid #6f6cff; color:#bdbbff; }
.section { display:none; padding-top:10px; }
.section.active { display:block; }
.card { background:#111015; border:1px solid #1d1d24; border-radius:16px; padding:14px 14px 12px; margin-bottom:12px; }
h2 { font-size:16px; margin:0 0 6px; }
h3 { font-size:15px; margin:6px 0 4px; color:#cfcfff; }
.small { opacity:.7; font-size:12px; }
.hr { height:1px; background:#1f1f26; margin:12px 0; }
.highlight { color:#a9a7ff; }
footer { padding:18px; text-align:center; opacity:.65; font-size:11px; }
</style>
</head>

<body>
<header>8 — inner spiral reading</header>

<div class="container" id="formArea">
<div class="card">
<h2>生年月日と名前を入力してください</h2>
<p class="small">※ 内容は端末内のみ処理・送信されません</p>
<input id="name" placeholder="名前（任意）">
<input id="birth" type="date">
<select id="gender">
<option value="">性別（任意）</option>
<option value="f">女性</option>
<option value="m">男性</option>
<option value="n">どれでもない／回答しない</option>
</select>
<button onclick="start()">占う</button>
</div>
</div>

<div class="container" id="resultArea" style="display:none">
<div class="tabs" id="tabs"></div>
<div id="sections"></div>
</div>

<footer>prototype | 8 orbit reading</footer>

<script>
// ------ core number (1〜8＋統合9) ------
function calcCore(dateStr){
  if(!dateStr) return 0;
  const nums = dateStr.replace(/-/g,"").split("").map(n=>+n);
  let s = nums.reduce((a,b)=>a+b,0);
  while(s>9){ s = s.toString().split("").map(n=>+n).reduce((a,b)=>a+b,0); }
  return s===9 ? 9 : (s===0?0:(s%8||8));
}

// ------ content bank (長文＋表裏＋流れ) ------
const TEXT = {
intro: (name)=>`
<div class="card">
<h2>総合 — いまのあなたを別の角度から読む</h2>
<p>
あなたは今、<span class="highlight">「当たるかどうか」よりも、自分を別の角度から見直したい地点</span>に立っています。<br>
これまでの選択・迷い・遠回りは、同じ場所を回ってきたように見えて、実は少しずつ高い地点へと<span class="highlight">螺旋状に登ってきた軌跡</span>でした。
</p>
<p>
この読みは未来を断定するものではなく、<span class="highlight">いまの心の立ち位置を言葉にする鏡</span>です。<br>
読み終えたあと、最初の一文が少し違って見えたなら——それは、あなたがすでに一段上へ進んだ合図です。
</p>
</div>
`,
core: (t)=>`
<div class="card">
<h2>あなたの核 — 性質・本質・潜在</h2>
<p>${t.core.long}</p>
<h3>表に現れる力</h3><p>${t.core.front}</p>
<h3>裏で揺らぐ力</h3><p>${t.core.back}</p>
<div class="hr"></div>
<p class="small">${t.core.tip}</p>
</div>
`,
face: (t)=>`
<div class="card">
<h2>表と裏 — 同じ性質の別の顔</h2>
<p>${t.face.body}</p>
<h3>表が強いとき</h3><p>${t.face.front}</p>
<h3>裏へ傾いたとき</h3><p>${t.face.back}</p>
<div class="hr"></div>
<p class="small">${t.face.bridge}</p>
</div>
`,
flow: (t)=>`
<div class="card">
<h2>運気の流れ — これまで／今／これから</h2>
<h3>これまで</h3><p>${t.flow.past}</p>
<h3>今</h3><p>${t.flow.now}</p>
<h3>これから</h3><p>${t.flow.next}</p>
<div class="hr"></div>
<p class="small">${t.flow.tip}</p>
</div>
`,
talents: (t)=>`
<div class="card">
<h2>8つの才能 — どれもあなたの中にある力</h2>
${t.talents.map(x=>`
<h3>${x.name}</h3>
<p>${x.long}</p>
<p class="small">扱い方：${x.tip}</p>
`).join("")}
</div>
`,
mission: (t)=>`
<div class="card">
<h2>人生テーマ — まとめ</h2>
<p>${t.theme}</p>
</div>
`
};

// ------ template by type (簡易版・後続拡張前提) ------
function packFor(type){
  const commonFlow = {
    past:`遠回りや選び直しの中で、強さと弱さの扱い方を学んできました。`,
    now:`いまは特定の力が少し強く表に出ている「変化の途中」。`,
    next:`才能を増やすより、使い方を整えるほど次の段へ進みます。`,
    tip:`立ち止まりは停滞ではなく、言葉になる前の手前にあります。`
  };
  const templates = {
    1:{ // 内省軸
      core:{long:`「自分の中で納得できる答え」を大切にし、静かに積み上げていく力。`,
            front:`流されず選べる・深く理解できる。`,
            back:`抱え込みすぎ・完璧待ちで動けなくなる。`,
            tip:`結論より「小さく一歩」。動きながら考えるほうが本来の強さが息をします。`},
      face:{body:`表は落ち着いた理性、裏は自責と慎重さとして現れます。`,
            front:`判断がぶれない。`,
            back:`自分だけを責めがち。`,
            bridge:`正しさより「今の自分にとっての最善」へ視点を一段下ろすと整います。`},
      flow:commonFlow,
      talents:[
        {name:`核を磨く人`,long:`内側に軸を育てる探究の力。`,tip:`一人で完結させすぎない。途中経過を外に出す。`},
        {name:`つながりを感じる人`,long:`感受性と共感の知性。`,tip:`境界線を引いて優しさを守る。`}
      ],
      theme:`「正しさ」ではなく「納得」を軸に、螺旋を一段ずつ登っていく歩み。`
    },
    2:{ // 共感軸
      core:{long:`感情や空気の微細な揺らぎまで受け取る、つながりの知性。`,
            front:`寄り添える・関係の調律ができる。`,
            back:`自分が後回し・疲労に気づきにくい。`,
            tip:`優しさ＝引き受けることではない。境界を引くほど本質の温度が残ります。`},
      face:{body:`表は包容と共感、裏は同調しすぎとして現れます。`,
            front:`人を安心させる存在感。`,
            back:`感情に巻き込まれる。`,
            bridge:`相手の気持ちと「自分の気持ち」を並べて置くスペースを作る。`},
      flow:commonFlow,
      talents:[
        {name:`つながりを感じる人`,long:`人と世界をやわらかくつなぐ循環の力。`,tip:`疲れたら静かな場所に戻る選択を。`},
        {name:`核を磨く人`,long:`感情を内側で言葉に変える洞察。`,tip:`感じたことを文章に落とすと整う。`}
      ],
      theme:`やさしさを消さずに、自分の輪郭を取り戻していく循環の学び。`
    }
  };
  return templates[type] || templates[1];
}

// ------ render ------
function start(){
  const name=document.getElementById("name").value.trim();
  const birth=document.getElementById("birth").value;
  const t=packFor(calcCore(birth));
  const tabs=[
    ["総合",TEXT.intro(name)],
    ["あなたの核",TEXT.core(t)],
    ["表と裏",TEXT.face(t)],
    ["運気の流れ",TEXT.flow(t)],
    ["8つの才能",TEXT.talents(t)],
    ["人生テーマ",TEXT.mission(t)],
  ];
  document.getElementById("formArea").style.display="none";
  const tabsEl=document.getElementById("tabs");
  const secEl=document.getElementById("sections");
  tabsEl.innerHTML=""; secEl.innerHTML="";
  tabs.forEach((p,i)=>{
    const tab=document.createElement("div");
    tab.className="tab"+(i===0?" active":"");
    tab.textContent=p[0];
    tab.onclick=()=>select(i);
    tabsEl.appendChild(tab);
    const sec=document.createElement("div");
    sec.className="section"+(i===0?" active":"");
    sec.innerHTML=p[1];
    secEl.appendChild(sec);
  });
  document.getElementById("resultArea").style.display="block";
  window.select=(idx)=>{
    [...tabsEl.children].forEach((t,i)=>t.classList.toggle("active",i===idx));
    [...secEl.children].forEach((s,i)=>s.classList.toggle("active",i===idx));
  };
}
</script>
</body>
</html>
